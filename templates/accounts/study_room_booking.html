{% extends 'base.html' %}
{% load static %}

{% block title %}Study Room Booking - {{ block.super }}{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <div class="col-md-12">
            <div class="card shadow-sm">
                <div class="card-header bg-success text-white">
                    <h1 class="h3 mb-0">Study Room Booking</h1>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-8">
                            <p class="text-muted">Book study rooms for individual or group work. Our library offers various study spaces equipped with modern facilities to support your academic needs.</p>

                            <h2 class="h4 text-success mt-4">Available Study Rooms</h2>
                            <div class="row mt-3">
                                {% for room in rooms %}
                                <div class="col-md-6">
                                    <div class="card border-success">
                                        <div class="card-body">
                                            <h6 class="card-title">
                                                <i class="fas fa-users text-success"></i> {{ room.name }}
                                            </h6>
                                            <p class="card-text">{{ room.description }}</p>
                                            <ul class="list-unstyled">
                                                <li><i class="fas fa-chalkboard-teacher text-success"></i> Capacity: {{ room.capacity }} people</li>
                                                <li><i class="fas fa-plug text-success"></i> {{ room.equipment|default:"Standard equipment" }}</li>
                                                <li><i class="fas fa-wifi text-success"></i> {{ room.features|default:"Standard features" }}</li>
                                                <li><i class="fas fa-coffee text-success"></i> {{ room.location|default:"Main Library" }}</li>
                                            </ul>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <span class="badge bg-success">{{ room.get_room_type_display }}</span>
                                                <a href="{% url 'circulation:room_booking' %}" class="btn btn-success btn-sm">Book Now</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {% endfor %}
                            </div>

                            <h2 class="h4 text-success mt-5">Booking Information</h2>
                            <div class="row mt-3">
                                <div class="col-md-6">
                                    <div class="card border-success">
                                        <div class="card-body">
                                            <h6 class="card-title">
                                                <i class="fas fa-calendar-alt text-success"></i> Reservation Rules
                                            </h6>
                                            <ul class="list-unstyled">
                                                <li><i class="fas fa-user-graduate text-success"></i> Available to current students and staff only</li>
                                                <li><i class="fas fa-clock text-success"></i> Maximum 4 hours per day per person</li>
                                                <li><i class="fas fa-calendar-check text-success"></i> Reservations can be made up to 7 days in advance</li>
                                                <li><i class="fas fa-exclamation-triangle text-success"></i> Late arrivals may result in room reassignment</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card border-success">
                                        <div class="card-body">
                                            <h6 class="card-title">
                                                <i class="fas fa-dollar-sign text-success"></i> Fees & Charges
                                            </h6>
                                            <ul class="list-unstyled">
                                                <li><i class="fas fa-tags text-success"></i> Individual carrels: Free</li>
                                                <li><i class="fas fa-tags text-success"></i> Group study rooms: Free</li>
                                                <li><i class="fas fa-tags text-success"></i> Computer rooms: Free</li>
                                                <li><i class="fas fa-tags text-success"></i> Presentation rooms: N1,000 per hour</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <h2 class="h4 text-success mt-5">Online Booking System</h2>
                            <div class="card border-success">
                                <div class="card-body">
                                    <form method="post" action="{% url 'circulation:room_booking' %}">
                                        {% csrf_token %}
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="room" class="form-label">Room Type</label>
                                                    <select class="form-select" id="room" name="room">
                                                        {% for room in rooms %}
                                                        <option value="{{ room.id }}">{{ room.name }} ({{ room.get_room_type_display }})</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="date" class="form-label">Date</label>
                                                    <input type="date" class="form-control" id="date" name="date" required>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="start_time" class="form-label">Start Time</label>
                                                    <input type="time" class="form-control" id="start_time" name="start_time" required>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="mb-3">
                                                    <label for="end_time" class="form-label">End Time</label>
                                                    <input type="time" class="form-control" id="end_time" name="end_time" required>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="participants" class="form-label">Number of Participants</label>
                                                    <input type="number" class="form-control" id="participants" name="participants" min="1" max="20" required>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="purpose" class="form-label">Purpose of Use</label>
                                                    <select class="form-select" id="purpose" name="purpose">
                                                        <option value="individual_study">Individual Study</option>
                                                        <option value="group_project">Group Project</option>
                                                        <option value="research_work">Research Work</option>
                                                        <option value="presentation_practice">Presentation Practice</option>
                                                        <option value="meeting">Meeting</option>
                                                        <option value="other">Other</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="additional_info" class="form-label">Additional Information</label>
                                            <textarea class="form-control" id="additional_info" name="additional_info" rows="3" placeholder="Any special requirements or notes"></textarea>
                                        </div>
                                        <button type="submit" class="btn btn-success">Check Availability & Book</button>
                                        <a href="{% url 'circulation:room_calendar' %}" class="btn btn-outline-success ms-2">View Calendar</a>
                                    </form>
                                </div>
                            </div>

                            <h2 class="h4 text-success mt-5">Room Features & Equipment</h2>
                            <div class="row mt-3">
                                <div class="col-md-4">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <i class="fas fa-wifi fa-2x text-success mb-3"></i>
                                            <h6>Wi-Fi Access</h6>
                                            <p class="small text-muted">High-speed internet throughout all study areas</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <i class="fas fa-plug fa-2x text-success mb-3"></i>
                                            <h6>Power Outlets</h6>
                                            <p class="small text-muted">Multiple charging stations and power outlets</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <i class="fas fa-print fa-2x text-success mb-3"></i>
                                            <h6>Printing Services</h6>
                                            <p class="small text-muted">On-demand printing and scanning available</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row mt-4">
                                <div class="col-md-4">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <i class="fas fa-chalkboard-teacher fa-2x text-success mb-3"></i>
                                            <h6>Whiteboards</h6>
                                            <p class="small text-muted">Magnetic whiteboards in all group rooms</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <i class="fas fa-tv fa-2x text-success mb-3"></i>
                                            <h6>Display Screens</h6>
                                            <p class="small text-muted">Large screens for presentations and collaboration</p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card bg-light">
                                        <div class="card-body text-center">
                                            <i class="fas fa-headset fa-2x text-success mb-3"></i>
                                            <h6>Technical Support</h6>
                                            <p class="small text-muted">On-site assistance for technical issues</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <h2 class="h4 text-success mt-5">Study Room Policies</h2>
                            <div class="row mt-3">
                                <div class="col-md-6">
                                    <div class="card border-success">
                                        <div class="card-body">
                                            <h6 class="card-title">
                                                <i class="fas fa-volume-mute text-success"></i> Quiet Hours
                                            </h6>
                                            <ul class="list-unstyled">
                                                <li><i class="fas fa-clock text-success"></i> Silent study area: 24/7 quiet</li>
                                                <li><i class="fas fa-users text-success"></i> Group rooms: Moderate conversation allowed</li>
                                                <li><i class="fas fa-microphone-slash text-success"></i> No loud conversations in quiet zones</li>
                                                <li><i class="fas fa-mobile-alt text-success"></i> Phone calls must be taken outside</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card border-success">
                                        <div class="card-body">
                                            <h6 class="card-title">
                                                <i class="fas fa-utensils text-success"></i> Food & Drink Policy
                                            </h6>
                                            <ul class="list-unstyled">
                                                <li><i class="fas fa-coffee text-success"></i> Covered drinks allowed</li>
                                                <li><i class="fas fa-apple-alt text-success"></i> Light snacks permitted</li>
                                                <li><i class="fas fa-pizza-slice text-success"></i> No hot meals or strong odors</li>
                                                <li><i class="fas fa-trash text-success"></i> Clean up after use</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row mt-4">
                                <div class="col-md-6">
                                    <div class="card border-success">
                                        <div class="card-body">
                                            <h6 class="card-title">
                                                <i class="fas fa-user-check text-success"></i> Room Usage
                                            </h6>
                                            <ul class="list-unstyled">
                                                <li><i class="fas fa-id-card text-success"></i> Valid university ID required</li>
                                                <li><i class="fas fa-users text-success"></i> Maximum occupancy must be observed</li>
                                                <li><i class="fas fa-clock text-success"></i> Rooms must be vacated at reservation end time</li>
                                                <li><i class="fas fa-book text-success"></i> Academic use only</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="card border-success">
                                        <div class="card-body">
                                            <h6 class="card-title">
                                                <i class="fas fa-exclamation-triangle text-success"></i> Prohibited Items
                                            </h6>
                                            <ul class="list-unstyled">
                                                <li><i class="fas fa-smoking-ban text-success"></i> No smoking or vaping</li>
                                                <li><i class="fas fa-wine-bottle text-success"></i> No alcohol or drugs</li>
                                                <li><i class="fas fa-gamepad text-success"></i> No gaming or entertainment</li>
                                                <li><i class="fas fa-paw text-success"></i> No pets or animals</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <h2 class="h4 text-success mt-5">Contact & Support</h2>
                            <div class="row mt-3">
                                <div class="col-md-4">
                                    <div class="card">
                                        <div class="card-header bg-success text-white">
                                            <h6 class="mb-0">Room Reservations</h6>
                                        </div>
                                        <div class="card-body">
                                            <ul class="list-unstyled">
                                                <li><i class="fas fa-phone text-success"></i> +234 (0) 803 123 4567</li>
                                                <li><i class="fas fa-envelope text-success"></i> rooms@unimaid.edu.ng</li>
                                                <li><i class="fas fa-clock text-success"></i> Mon-Fri: 8 AM - 8 PM</li>
                                                <li><i class="fas fa-calendar-check text-success"></i> Online booking 24/7</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card">
                                        <div class="card-header bg-success text-white">
                                            <h6 class="mb-0">Technical Support</h6>
                                        </div>
                                        <div class="card-body">
                                            <ul class="list-unstyled">
                                                <li><i class="fas fa-headset text-success"></i> On-site assistance available</li>
                                                <li><i class="fas fa-desktop text-success"></i> Computer and equipment help</li>
                                                <li><i class="fas fa-wifi text-success"></i> Network connectivity support</li>
                                                <li><i class="fas fa-print text-success"></i> Printing and scanning issues</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="card">
                                        <div class="card-header bg-success text-white">
                                            <h6 class="mb-0">Frequently Asked Questions</h6>
                                        </div>
                                        <div class="card-body">
                                            <ul class="list-unstyled">
                                                <li><i class="fas fa-question-circle text-success"></i> How far in advance can I book?</li>
                                                <li><i class="fas fa-question-circle text-success"></i> Can I extend my reservation?</li>
                                                <li><i class="fas fa-question-circle text-success"></i> What happens if I'm late?</li>
                                                <li><i class="fas fa-question-circle text-success"></i> Can I cancel my reservation?</li>
                                            </ul>
                                            <a href="{% url 'accounts:faq' %}" class="btn btn-success btn-sm mt-2">View FAQ</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card bg-light">
                                <div class="card-header">
                                    <h5 class="mb-0">Quick Links</h5>
                                </div>
                                <div class="card-body">
                                    <ul class="list-unstyled">
                                        <li class="mb-2">
                                            <a href="{% url 'accounts:research_assistance' %}" class="text-decoration-none">
                                                <i class="fas fa-search text-success"></i> Research Assistance
                                            </a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="{% url 'accounts:digital_resources' %}" class="text-decoration-none">
                                                <i class="fas fa-laptop text-success"></i> Digital Resources
                                            </a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="{% url 'accounts:library_resources' %}" class="text-decoration-none">
                                                <i class="fas fa-book text-success"></i> Library Resources
                                            </a>
                                        </li>
                                        <li class="mb-2">
                                            <a href="{% url 'accounts:interlibrary_loan' %}" class="text-decoration-none">
                                                <i class="fas fa-exchange-alt text-success"></i> Interlibrary Loan
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="card mt-3">
                                <div class="card-header bg-success text-white">
                                    <h6 class="mb-0">Room Availability</h6>
                                </div>
                                <div class="card-body">
                                    <div class="text-center">
                                        <h4 class="text-success">{{ occupancy_rate|floatformat:0 }}%</h4>
                                        <p class="small text-muted">Current Occupancy Rate</p>
                                        <hr>
                                        <h4 class="text-success">{{ available_rooms.count }}</h4>
                                        <p class="small text-muted">Available Rooms</p>
                                        <hr>
                                        <h4 class="text-success">{{ total_rooms.count }}</h4>
                                        <p class="small text-muted">Total Rooms</p>
                                    </div>
                                    <a href="{% url 'circulation:room_calendar' %}" class="btn btn-success btn-sm mt-2 w-100">Check Live Availability</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Add interactive features to resource cards
    const resourceCards = document.querySelectorAll('.card.border-success');
    
    resourceCards.forEach(card => {
        card.addEventListener('mouseenter', function() {
            this.style.transform = 'translateY(-3px)';
            this.style.transition = 'transform 0.3s ease';
        });
        
        card.addEventListener('mouseleave', function() {
            this.style.transform = 'translateY(0)';
        });
    });

    // Add form validation and interactivity
    const roomTypeSelect = document.getElementById('roomType');
    const participantsInput = document.getElementById('participants');
    
    roomTypeSelect.addEventListener('change', function() {
        if (this.value.includes('Group')) {
            participantsInput.disabled = false;
            participantsInput.min = 2;
            participantsInput.max = 8;
        } else {
            participantsInput.disabled = true;
            participantsInput.value = 1;
        }
    });
});
</script>
{% endblock %}